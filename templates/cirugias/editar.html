{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>Editar Cirugía</h2>
    <form method="post">
        <div class="mb-3">
            <label for="paciente_id" class="form-label">Paciente</label>
            <select class="form-select" id="paciente_id" name="paciente_id" required>
                <option value="">Seleccione...</option>
                {% for paciente in pacientes %}
                <option value="{{ paciente.id }}" {% if paciente.id == cirugia.paciente_id %}selected{% endif %}>{{ paciente.nombre }} {{ paciente.apellido }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="medico_id" class="form-label">Médico</label>
            <select class="form-select" id="medico_id" name="medico_id" required>
                <option value="">Seleccione...</option>
                {% for medico in medicos %}
                <option value="{{ medico.id }}" {% if medico.id == cirugia.medico_id %}selected{% endif %}>{{ medico.nombre }} {{ medico.apellido }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="enfermera_id" class="form-label">Enfermera</label>
            <select class="form-select" id="enfermera_id" name="enfermera_id" required>
                <option value="">Seleccione...</option>
                {% for enfermera in enfermeras %}
                <option value="{{ enfermera.id }}" {% if enfermera.id == cirugia.enfermera_id %}selected{% endif %}>{{ enfermera.nombre }} {{ enfermera.apellido }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="fecha_cirugia" class="form-label">Fecha y hora de cirugía</label>
            <input type="datetime-local" class="form-control" id="fecha_cirugia" name="fecha_cirugia" value="{{ cirugia.fecha_cirugia.strftime('%Y-%m-%dT%H:%M') if cirugia.fecha_cirugia else '' }}">
        </div>
        <div class="mb-3">
            <label for="tipo_cirugia" class="form-label">Tipo de cirugía</label>
            <input type="text" class="form-control" id="tipo_cirugia" name="tipo_cirugia" value="{{ cirugia.tipo_cirugia }}" required>
        </div>
        <div class="mb-3">
            <label for="duracion_horas" class="form-label">Duración (horas)</label>
            <input type="number" step="0.1" class="form-control" id="duracion_horas" name="duracion_horas" value="{{ cirugia.duracion_horas }}" required>
        </div>
        <div class="mb-3">
            <label for="observaciones" class="form-label">Observaciones</label>
            <textarea class="form-control" id="observaciones" name="observaciones">{{ cirugia.observaciones }}</textarea>
        </div>
        <button type="submit" class="btn btn-success">Guardar Cambios</button>
        <a href="{{ url_for('cirugias') }}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}
